# nc (Net Cat)

Простая утилита для установки TCP/UDP соединения и передачи данных между машинами.   
С другой стороны - швейцарский нож для админа )  

## Опции

Кратенько об опциях, которые используются ниже:  

|Опция| Значение |
|:----|:---------|
| v | дополнительная диагностика; Если не использовать опцию -v, Netcat выдает только принятую информацию. Если опция -v использована один раз, вы сможете узнать, с каким адресом произошло соединение или какой адрес отслеживается в случае, если возникли какие-то проблемы. Повторное использование опции позволит узнать, какое количество данных было послано или принято до завершения соединения. |
| n |отключить DNS и поиск номеров портов по /etc/services. сообщает Netcat, что не нужно осуществлять поиск каких-либо хостов. Если вы используете эту опцию, не следует указывать никаких имен хостов в качестве аргументов.|
| z | не посылать данные (сканирование портов) |
| l | переход в пассивный режим (прослушивание порта);Если эта опция не определена для исходящего соединения, Netcat будет использовать порт, который определен для этого в системе, что и делают большинство TCP или UDP клиентов. Имейте в виду, что в Unix-системах только пользователь root может определять номера портов меньше чем 1024 |
| p число | Порт |
| u |подключаться по UDP ( По умолчанию TCP) |
| e + command | Если Netcat скомпилирован с опцией GAPING_SECURITY_HOLE, программа может выполнять команду всякий раз, когда кто-либо устанавливает соединение с прослушиваемым портом, до тех пор, пока клиент Netcat перенаправляет ввод/вывод работающей программе. Использовать эту опцию достаточно опасно, если вы не до конца представляете себе, что вы делаете. Это быстрый и простой способ открыть «черный ход» в вашу систему. Пример будет приведен далее |


## Примеры использования

Вот ряд возможностей которые позволяет делать данная утилита. 

### Проверить наличие открытого порта 

`nc -vn 192.172.13.19 22`  

```
192.172.13.19 22 (ssh) open  
SSH-2.0-OpenSSH_8.2p1 Ubuntu-4ubuntu0.5
```

### Сканер портов 

`nc -vnz 192.172.13.19 20-50`  

### Сканер UDP портов 

`nc -vnzu 192.172.13.19 5550-5560`  


### Отправка UDP пакета 

`echo -n "hello" | nc -u -w1 192.172.13.19 7777`

### Прием UDP пакета 

`nc -ul 7777` - разовое получение пакета  
`while true;do nc -ul 7777; done` - потоковое получение пакетов. Пока не завалите выполнение процесса  


### Передача файлов 

С начала на удаленной машине нужно открыть порт на прослушку, указав в куда складывать полученные байты  
`nc -lvp 5555 > /tmp/file.txt`  
Далее со своей локальной машины отправляем данные  
`nc 192.172.13.19 7777 < file.txt`

### Чат 

На одном узле выполняем `nc -lp 9000`. Открываем 9000 порт для прослушки.  
На втором `nc 192.172.13.19 9000`. Цепляемся к удаленному порту.  

Переписываемся пока не надоест. Как надоело `Crtl+C` чтобы закончить этот фарс )  


### Доступ к удаленной машине в помощью оболочки (Реверс-шелл)

На удаленной машине открываем порт в свящке с командой выполнения при подключении:  
`nc -e /bin/bash -lp 4444`  
На локальной стучимся на 4444 порт:  
`nc 192.172.13.19 4444`  
И можем выполнять команды от открывшего порт пользователя.  
_Пара примечаний:_
1) Если на удаленной машине открыть от рута или с помощь `sudo nc -e /bin/bash -lp 4444`, то вошедший будет иметь полный доступ к удаленной машине. Помним это и хернёй не занимаемся )  
2) Не все версии nc поддерживают опцию `e`. Поэтому перед использованием посмотрите `nc -h` чего умеет ваша версия утилиты.  


### Netcact в роли простейшего веб-сервера (Бестолковая хрень).

Netcat может выполнять роль простейшего веб-сервера для отображения html странички.


`while true; do nc -lp 8888 < index.html; done`

C помощью браузера по адресу: <http://хост netcat:8888/index.html>.  
Для использования стандартного порта веб-сервера под номером 80 вам придется запустить nc c root привилегиями (Не надо этим баловаться):

`while true; do sudo nc -lp 80 < test.html; done`
